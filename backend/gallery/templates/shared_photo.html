<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Shared Photo - {{ photo.title|default:'Untitled' }}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: #f8f9fa; }
        .photo-card { max-width: 800px; margin: 2rem auto; }
        .photo-img { width: 100%; max-height: 70vh; object-fit: contain; background: #eee; }
        .chip { display: inline-block; padding: 0.25em 0.75em; margin: 0.1em; border-radius: 16px; background: #e0e0e0; font-size: 0.95em; }
        .avatar { width: 48px; height: 48px; border-radius: 50%; object-fit: cover; background: #222; }
    </style>
</head>
<body>
<div class="container photo-card bg-white shadow rounded p-4">
    <div class="d-flex align-items-center mb-3">
        {% if photo.photographer.profile_picture %}
            <img src="{{ photo.photographer.profile_picture.url }}" class="avatar me-2" alt="Profile Picture">
        {% else %}
            <div class="avatar me-2 d-flex align-items-center justify-content-center text-white bg-dark">ðŸ‘¤</div>
        {% endif %}
        <div>
            <h5 class="mb-0">{{ photo.photographer.full_name|default:photo.photographer.email }}</h5>
            <small class="text-muted">Uploaded: {{ photo.uploaded_at|date:'M d, Y H:i' }}</small>
        </div>
    </div>
    <img src="{{ photo.image.url }}" class="photo-img mb-3" alt="Photo">
    {% if photo.title %}
        <h3>{{ photo.title }}</h3>
    {% endif %}
    {% if photo.description %}
        <p class="mb-2">{{ photo.description }}</p>
    {% endif %}
    <div class="mb-3">
        <span class="fw-bold">Tags:</span>
        {% for tag in photo.manual_tags.all %}
            <span class="chip">{{ tag }}</span>
        {% empty %}
            <span class="text-muted">No manual tags</span>
        {% endfor %}
        {% for tag in photo.auto_tags %}
            <span class="chip bg-light">{{ tag }}</span>
        {% endfor %}
    </div>
    <div class="mb-3">
        <span class="fw-bold">People Tagged:</span>
        {% if photo.tagged_users.all %}
            {% for user in photo.tagged_users.all %}
                <span class="chip bg-primary text-white">{{ user.full_name|default:user.email }}</span>
            {% endfor %}
        {% else %}
            <span class="text-muted">No one tagged</span>
        {% endif %}
    </div>
    <div class="mb-3">
        <span class="fw-bold">Likes:</span> {{ photo.likes_cnt }}
    </div>
    {% if photo.exif_data %}
        <div class="mb-3">
            <span class="fw-bold">Technical Details:</span>
            <ul class="mb-0">
                {% for key, value in photo.exif_data.items %}
                    <li><b>{{ key|capfirst }}:</b> {{ value }}</li>
                {% endfor %}
            </ul>
        </div>
    {% endif %}
</div>
</body>
</html>
